{% block page_scripts %}
    <!-- Wisembly App registration -->
    <script type="text/javascript">
        window.api_url = '{{ app['third_party']['wisembly'].api_url }}';
        window.app_url = '{{ app['third_party']['wisembly'].app_url }}';
        window.app_id = '{{ app['third_party']['wisembly'].app_id }}';
        window.app_secret = '{{ app['third_party']['wisembly'].app_secret }}';
    </script>

    <script src="{{ asset("/vendor/jquery/jquery.min.js") }}" type="text/javascript"></script>
    <script src="{{ asset("/vendor/parsleyjs/dist/parsley.remote.min.js") }}" type="text/javascript"></script>
    <script src="{{ asset("/vendor/bootstrap/js/bootstrap-affix.js") }}" type="text/javascript"></script>
    <script src="{{ asset("/vendor/bootstrap/js/bootstrap-scrollspy.js") }}" type="text/javascript"></script>
    <script src="{{ asset("/vendor/bootstrap/js/bootstrap-dropdown.js") }}" type="text/javascript"></script>
    <script src="{{ asset("/vendor/jquery-easing/jquery.easing.min.js") }}" type="text/javascript"></script>
    <script src="{{ asset("/vendor/crypto-js/rollups/sha1.js") }}" type="text/javascript"></script>
    <script src="{{ asset("/vendor/basil.js/src/basil.js") }}" type="text/javascript"></script>

    <script type="text/javascript">
        window.basil = new window.Basil();
    </script>

    <script src="{{ asset("/static/js/wisembly.js") }}" type="text/javascript"></script>
    <script src="{{ asset("/static/js/mixpanel.js") }}" type="text/javascript"></script>
{% endblock %}

{# Must be called BEFORE Google Analytics #}
{% block iAdvize %}
    {% if app['third_party'].iadvize is not none %}
        <script type='text/javascript'>
        (function() {
        var idz = document.createElement('script'); idz.type = 'text/javascript'; idz.async = true;
        idz.src = document.location.protocol + "//lc.iadvize.com/iadvize.js?sid={{ app['third_party'].iadvize }}";
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(idz, s);
        })();
        </script>
    {% endif %}
{% endblock %}

{% block google_analytics %}
    {% if app['third_party'].analytics is not none %}
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', '{{ app['third_party'].analytics }}', 'wisembly.com');
          ga('require', 'displayfeatures');
          ga('send', 'pageview');
        </script>
    {% endif %}
{% endblock %}

{% block mixPanel %}
    {% if app['third_party'].mixpanel is not none %}
        <script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
        typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);
        b._i.push([a,e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
        mixpanel.init("{{ app['third_party'].mixpanel }}");</script>
    {% endif %}
{% endblock %}

{% block azalead %}
    {% if app['third_party'].azalead is not none %}
        <script type="text/javascript">
            var _paq = _paq || [];
            _paq.push(["trackPageView"]);
            _paq.push(["enableLinkTracking"]);

            (function() {
            var u=(("https:" == document.location.protocol) ? "https" : "http") + "://trker1.azalead.com/azalead_tracker/";
            _paq.push(["setTrackerUrl", u+"piwik.php"]);
            _paq.push(["setSiteId", "{{ app['third_party'].azalead }}"]);
            var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
            g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
            })();
        </script>
        <!-- End Azalead tracker Code -->

        <noscript>
            <img src="http://trker1.azalead.com/azalead_tracker/piwik.php?idsite={{ app['third_party'].azalead }}&amp;rec=1" style="border:0" alt="" />
        </noscript>
    {% endif %}
{% endblock %}

{% block hubspot %}
    {% if app['third_party'].hubspot is not none %}
        <!-- Start of Async HubSpot Analytics Code -->
         <script type="text/javascript">
           (function(d,s,i,r) {
             if (d.getElementById(i)){return;}
             var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
             n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/{{ app['third_party'].hubspot }}.js';
             e.parentNode.insertBefore(n, e);
           })(document,"script","hs-analytics",300000);
         </script>
        <!-- End of Async HubSpot Analytics Code -->
    {% endif %}
{% endblock %}
